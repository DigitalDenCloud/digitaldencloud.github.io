{% assign urls = include.urls | split: ',' %}

<<<<<<< HEAD
{% assign combined_urls = nil %}
=======
{% assign combined_urls = null %}
>>>>>>> v7.4.1

{% assign domain = 'https://cdn.jsdelivr.net/' %}

{% for url in urls %}
  {% if url contains domain %}
    {% assign url_snippet = url | slice: domain.size, url.size %}

    {% if combined_urls %}
      {% assign combined_urls = combined_urls | append: ',' | append: url_snippet %}
    {% else %}
      {% assign combined_urls = domain | append: 'combine/' | append: url_snippet %}
    {% endif %}

  {% elsif url contains '//' %}
<<<<<<< HEAD
    <script src="{{ url }}"></script>
  {% else %}
    <script src="{{ url | relative_url }}"></script>
=======
    <script defer src="{{ url }}"></script>
  {% else %}
    <script defer src="{{ url | relative_url }}"></script>
>>>>>>> v7.4.1
  {% endif %}
{% endfor %}

{% if combined_urls %}
<<<<<<< HEAD
  <script src="{{ combined_urls }}"></script>
=======
  <script defer src="{{ combined_urls }}"></script>
>>>>>>> v7.4.1
{% endif %}
